"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/admin/theme/route";
exports.ids = ["app/api/admin/theme/route"];
exports.modules = {

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fadmin%2Ftheme%2Froute&page=%2Fapi%2Fadmin%2Ftheme%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Ftheme%2Froute.ts&appDir=C%3A%5CUsers%5COffirOmer%5CDocuments%5CIPSPlatform%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5COffirOmer%5CDocuments%5CIPSPlatform&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fadmin%2Ftheme%2Froute&page=%2Fapi%2Fadmin%2Ftheme%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Ftheme%2Froute.ts&appDir=C%3A%5CUsers%5COffirOmer%5CDocuments%5CIPSPlatform%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5COffirOmer%5CDocuments%5CIPSPlatform&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_OffirOmer_Documents_IPSPlatform_src_app_api_admin_theme_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/admin/theme/route.ts */ \"(rsc)/./src/app/api/admin/theme/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/admin/theme/route\",\n        pathname: \"/api/admin/theme\",\n        filename: \"route\",\n        bundlePath: \"app/api/admin/theme/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\OffirOmer\\\\Documents\\\\IPSPlatform\\\\src\\\\app\\\\api\\\\admin\\\\theme\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_OffirOmer_Documents_IPSPlatform_src_app_api_admin_theme_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/admin/theme/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhZG1pbiUyRnRoZW1lJTJGcm91dGUmcGFnZT0lMkZhcGklMkZhZG1pbiUyRnRoZW1lJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGYWRtaW4lMkZ0aGVtZSUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNPZmZpck9tZXIlNUNEb2N1bWVudHMlNUNJUFNQbGF0Zm9ybSU1Q3NyYyU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9QyUzQSU1Q1VzZXJzJTVDT2ZmaXJPbWVyJTVDRG9jdW1lbnRzJTVDSVBTUGxhdGZvcm0maXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ21DO0FBQ2hIO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGFyZW50aW5nLXNjaG9vbC1wbGF0Zm9ybS8/MmZlNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJDOlxcXFxVc2Vyc1xcXFxPZmZpck9tZXJcXFxcRG9jdW1lbnRzXFxcXElQU1BsYXRmb3JtXFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXGFkbWluXFxcXHRoZW1lXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9hZG1pbi90aGVtZS9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2FkbWluL3RoZW1lXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9hZG1pbi90aGVtZS9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFVzZXJzXFxcXE9mZmlyT21lclxcXFxEb2N1bWVudHNcXFxcSVBTUGxhdGZvcm1cXFxcc3JjXFxcXGFwcFxcXFxhcGlcXFxcYWRtaW5cXFxcdGhlbWVcXFxccm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL2FkbWluL3RoZW1lL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fadmin%2Ftheme%2Froute&page=%2Fapi%2Fadmin%2Ftheme%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Ftheme%2Froute.ts&appDir=C%3A%5CUsers%5COffirOmer%5CDocuments%5CIPSPlatform%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5COffirOmer%5CDocuments%5CIPSPlatform&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/admin/theme/route.ts":
/*!******************************************!*\
  !*** ./src/app/api/admin/theme/route.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DELETE: () => (/* binding */ DELETE),\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   PUT: () => (/* binding */ PUT)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_supabase_server__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/supabase/server */ \"(rsc)/./src/lib/supabase/server.ts\");\n/* harmony import */ var _lib_audit_auditService__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/audit/auditService */ \"(rsc)/./src/lib/audit/auditService.ts\");\n\n\n\n// GET - Fetch all theme configurations (admin only)\nasync function GET(request) {\n    try {\n        const supabase = await (0,_lib_supabase_server__WEBPACK_IMPORTED_MODULE_1__.createClient)();\n        // Check if user is admin\n        const { data: { user } } = await supabase.auth.getUser();\n        if (!user) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        const { data: userData } = await supabase.from(\"users\").select(\"role\").eq(\"id\", user.id).single();\n        if (!userData || userData.role !== \"admin\") {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Forbidden\"\n            }, {\n                status: 403\n            });\n        }\n        const { data: themes, error } = await supabase.from(\"theme_configs\").select(\"*\").order(\"created_at\", {\n            ascending: false\n        });\n        if (error) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: error.message\n            }, {\n                status: 500\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            data: themes\n        });\n    } catch (error) {\n        console.error(\"Get themes error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: \"Failed to fetch themes\"\n        }, {\n            status: 500\n        });\n    }\n}\n// POST - Create new theme configuration\nasync function POST(request) {\n    try {\n        const supabase = await (0,_lib_supabase_server__WEBPACK_IMPORTED_MODULE_1__.createClient)();\n        // Check if user is admin\n        const { data: { user } } = await supabase.auth.getUser();\n        if (!user) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        const { data: userData } = await supabase.from(\"users\").select(\"role\").eq(\"id\", user.id).single();\n        if (!userData || userData.role !== \"admin\") {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Forbidden\"\n            }, {\n                status: 403\n            });\n        }\n        const body = await request.json();\n        const { data: theme, error } = await supabase.from(\"theme_configs\").insert({\n            ...body,\n            created_by: user.id\n        }).select().single();\n        if (error) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: error.message\n            }, {\n                status: 500\n            });\n        }\n        // Log audit event for theme creation\n        await (0,_lib_audit_auditService__WEBPACK_IMPORTED_MODULE_2__.logAuditEvent)({\n            user_id: user.id,\n            event_type: \"CREATE\",\n            event_category: \"CONFIG\",\n            resource_type: \"theme_config\",\n            resource_id: theme.id,\n            resource_name: theme.theme_name,\n            action: \"Created new theme configuration\",\n            new_values: theme,\n            risk_level: \"medium\",\n            metadata: {\n                is_active: theme.is_active\n            }\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            data: theme,\n            message: \"Theme created successfully\"\n        });\n    } catch (error) {\n        console.error(\"Create theme error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: \"Failed to create theme\"\n        }, {\n            status: 500\n        });\n    }\n}\n// PUT - Update theme configuration\nasync function PUT(request) {\n    try {\n        const supabase = await (0,_lib_supabase_server__WEBPACK_IMPORTED_MODULE_1__.createClient)();\n        // Check if user is admin\n        const { data: { user }, error: authError } = await supabase.auth.getUser();\n        console.log(\"[Theme PUT] Auth check:\", {\n            user: user?.id,\n            authError\n        });\n        if (!user) {\n            console.log(\"[Theme PUT] No user found - returning 401\");\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Unauthorized - Please log in\"\n            }, {\n                status: 401\n            });\n        }\n        const { data: userData } = await supabase.from(\"users\").select(\"role\").eq(\"id\", user.id).single();\n        if (!userData || userData.role !== \"admin\") {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Forbidden\"\n            }, {\n                status: 403\n            });\n        }\n        const { id, ...updates } = await request.json();\n        if (!id) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Theme ID is required\"\n            }, {\n                status: 400\n            });\n        }\n        // Get old values for audit trail\n        const { data: oldTheme } = await supabase.from(\"theme_configs\").select(\"*\").eq(\"id\", id).single();\n        const { data: theme, error } = await supabase.from(\"theme_configs\").update(updates).eq(\"id\", id).select().single();\n        if (error) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: error.message\n            }, {\n                status: 500\n            });\n        }\n        // Log audit event for theme configuration change\n        await (0,_lib_audit_auditService__WEBPACK_IMPORTED_MODULE_2__.logConfigChange)(user.id, \"theme_config\", id, oldTheme, theme, {\n            theme_name: theme.theme_name,\n            is_active: theme.is_active,\n            changed_fields: Object.keys(updates)\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            data: theme,\n            message: \"Theme updated successfully\"\n        });\n    } catch (error) {\n        console.error(\"Update theme error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: \"Failed to update theme\"\n        }, {\n            status: 500\n        });\n    }\n}\n// DELETE - Delete theme configuration\nasync function DELETE(request) {\n    try {\n        const supabase = await (0,_lib_supabase_server__WEBPACK_IMPORTED_MODULE_1__.createClient)();\n        // Check if user is admin\n        const { data: { user } } = await supabase.auth.getUser();\n        if (!user) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        const { data: userData } = await supabase.from(\"users\").select(\"role\").eq(\"id\", user.id).single();\n        if (!userData || userData.role !== \"admin\") {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Forbidden\"\n            }, {\n                status: 403\n            });\n        }\n        const { searchParams } = new URL(request.url);\n        const id = searchParams.get(\"id\");\n        if (!id) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Theme ID is required\"\n            }, {\n                status: 400\n            });\n        }\n        // Check if it's the active theme and get theme details for audit\n        const { data: theme } = await supabase.from(\"theme_configs\").select(\"*\").eq(\"id\", id).single();\n        if (theme?.is_active) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Cannot delete active theme\"\n            }, {\n                status: 400\n            });\n        }\n        const { error } = await supabase.from(\"theme_configs\").delete().eq(\"id\", id);\n        if (error) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: error.message\n            }, {\n                status: 500\n            });\n        }\n        // Log audit event for theme deletion\n        await (0,_lib_audit_auditService__WEBPACK_IMPORTED_MODULE_2__.logAuditEvent)({\n            user_id: user.id,\n            event_type: \"DELETE\",\n            event_category: \"CONFIG\",\n            resource_type: \"theme_config\",\n            resource_id: id,\n            resource_name: theme?.theme_name,\n            action: \"Deleted theme configuration\",\n            old_values: theme,\n            risk_level: \"high\",\n            metadata: {\n                was_active: theme?.is_active\n            }\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            message: \"Theme deleted successfully\"\n        });\n    } catch (error) {\n        console.error(\"Delete theme error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: \"Failed to delete theme\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFZL0IsT0FBT2M7WUFDckI7UUFDRjtRQUVBLE9BQU8zQyxxREFBWUEsQ0FBQ1csSUFBSSxDQUFDO1lBQ3ZCQyxTQUFTO1lBQ1RhLFNBQVM7UUFDWDtJQUNGLEVBQUUsT0FBT1osT0FBTztRQUNkYSxRQUFRYixLQUFLLENBQUMsdUJBQXVCQTtRQUNyQyxPQUFPYixxREFBWUEsQ0FBQ1csSUFBSSxDQUN0QjtZQUFFQyxTQUFTO1lBQU9DLE9BQU87UUFBeUIsR0FDbEQ7WUFBRUMsUUFBUTtRQUFJO0lBRWxCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wYXJlbnRpbmctc2Nob29sLXBsYXRmb3JtLy4vc3JjL2FwcC9hcGkvYWRtaW4vdGhlbWUvcm91dGUudHM/MjAwNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQC9saWIvc3VwYWJhc2Uvc2VydmVyJztcbmltcG9ydCB7IGxvZ0NvbmZpZ0NoYW5nZSwgbG9nQXVkaXRFdmVudCB9IGZyb20gJ0AvbGliL2F1ZGl0L2F1ZGl0U2VydmljZSc7XG5cbi8vIEdFVCAtIEZldGNoIGFsbCB0aGVtZSBjb25maWd1cmF0aW9ucyAoYWRtaW4gb25seSlcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBzdXBhYmFzZSA9IGF3YWl0IGNyZWF0ZUNsaWVudCgpO1xuXG4gICAgLy8gQ2hlY2sgaWYgdXNlciBpcyBhZG1pblxuICAgIGNvbnN0IHsgZGF0YTogeyB1c2VyIH0gfSA9IGF3YWl0IHN1cGFiYXNlLmF1dGguZ2V0VXNlcigpO1xuICAgIGlmICghdXNlcikge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ1VuYXV0aG9yaXplZCcgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMSB9XG4gICAgICApO1xuICAgIH1cblxuICAgIGNvbnN0IHsgZGF0YTogdXNlckRhdGEgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgndXNlcnMnKVxuICAgICAgLnNlbGVjdCgncm9sZScpXG4gICAgICAuZXEoJ2lkJywgdXNlci5pZClcbiAgICAgIC5zaW5nbGUoKTtcblxuICAgIGlmICghdXNlckRhdGEgfHwgdXNlckRhdGEucm9sZSAhPT0gJ2FkbWluJykge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0ZvcmJpZGRlbicgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMyB9XG4gICAgICApO1xuICAgIH1cblxuICAgIGNvbnN0IHsgZGF0YTogdGhlbWVzLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCd0aGVtZV9jb25maWdzJylcbiAgICAgIC5zZWxlY3QoJyonKVxuICAgICAgLm9yZGVyKCdjcmVhdGVkX2F0JywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pO1xuXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH0sXG4gICAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIGRhdGE6IHRoZW1lcyxcbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdHZXQgdGhlbWVzIGVycm9yOicsIGVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0ZhaWxlZCB0byBmZXRjaCB0aGVtZXMnIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApO1xuICB9XG59XG5cbi8vIFBPU1QgLSBDcmVhdGUgbmV3IHRoZW1lIGNvbmZpZ3VyYXRpb25cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3Qgc3VwYWJhc2UgPSBhd2FpdCBjcmVhdGVDbGllbnQoKTtcblxuICAgIC8vIENoZWNrIGlmIHVzZXIgaXMgYWRtaW5cbiAgICBjb25zdCB7IGRhdGE6IHsgdXNlciB9IH0gPSBhd2FpdCBzdXBhYmFzZS5hdXRoLmdldFVzZXIoKTtcbiAgICBpZiAoIXVzZXIpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdVbmF1dGhvcml6ZWQnIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDEgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCB7IGRhdGE6IHVzZXJEYXRhIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ3VzZXJzJylcbiAgICAgIC5zZWxlY3QoJ3JvbGUnKVxuICAgICAgLmVxKCdpZCcsIHVzZXIuaWQpXG4gICAgICAuc2luZ2xlKCk7XG5cbiAgICBpZiAoIXVzZXJEYXRhIHx8IHVzZXJEYXRhLnJvbGUgIT09ICdhZG1pbicpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdGb3JiaWRkZW4nIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDMgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XG5cbiAgICBjb25zdCB7IGRhdGE6IHRoZW1lLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCd0aGVtZV9jb25maWdzJylcbiAgICAgIC5pbnNlcnQoe1xuICAgICAgICAuLi5ib2R5LFxuICAgICAgICBjcmVhdGVkX2J5OiB1c2VyLmlkLFxuICAgICAgfSlcbiAgICAgIC5zZWxlY3QoKVxuICAgICAgLnNpbmdsZSgpO1xuXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH0sXG4gICAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBMb2cgYXVkaXQgZXZlbnQgZm9yIHRoZW1lIGNyZWF0aW9uXG4gICAgYXdhaXQgbG9nQXVkaXRFdmVudCh7XG4gICAgICB1c2VyX2lkOiB1c2VyLmlkLFxuICAgICAgZXZlbnRfdHlwZTogJ0NSRUFURScsXG4gICAgICBldmVudF9jYXRlZ29yeTogJ0NPTkZJRycsXG4gICAgICByZXNvdXJjZV90eXBlOiAndGhlbWVfY29uZmlnJyxcbiAgICAgIHJlc291cmNlX2lkOiB0aGVtZS5pZCxcbiAgICAgIHJlc291cmNlX25hbWU6IHRoZW1lLnRoZW1lX25hbWUsXG4gICAgICBhY3Rpb246ICdDcmVhdGVkIG5ldyB0aGVtZSBjb25maWd1cmF0aW9uJyxcbiAgICAgIG5ld192YWx1ZXM6IHRoZW1lLFxuICAgICAgcmlza19sZXZlbDogJ21lZGl1bScsXG4gICAgICBtZXRhZGF0YToge1xuICAgICAgICBpc19hY3RpdmU6IHRoZW1lLmlzX2FjdGl2ZSxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIGRhdGE6IHRoZW1lLFxuICAgICAgbWVzc2FnZTogJ1RoZW1lIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdDcmVhdGUgdGhlbWUgZXJyb3I6JywgZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnRmFpbGVkIHRvIGNyZWF0ZSB0aGVtZScgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICk7XG4gIH1cbn1cblxuLy8gUFVUIC0gVXBkYXRlIHRoZW1lIGNvbmZpZ3VyYXRpb25cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQVVQocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBzdXBhYmFzZSA9IGF3YWl0IGNyZWF0ZUNsaWVudCgpO1xuXG4gICAgLy8gQ2hlY2sgaWYgdXNlciBpcyBhZG1pblxuICAgIGNvbnN0IHsgZGF0YTogeyB1c2VyIH0sIGVycm9yOiBhdXRoRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLmF1dGguZ2V0VXNlcigpO1xuICAgIGNvbnNvbGUubG9nKCdbVGhlbWUgUFVUXSBBdXRoIGNoZWNrOicsIHsgdXNlcjogdXNlcj8uaWQsIGF1dGhFcnJvciB9KTtcblxuICAgIGlmICghdXNlcikge1xuICAgICAgY29uc29sZS5sb2coJ1tUaGVtZSBQVVRdIE5vIHVzZXIgZm91bmQgLSByZXR1cm5pbmcgNDAxJyk7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnVW5hdXRob3JpemVkIC0gUGxlYXNlIGxvZyBpbicgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMSB9XG4gICAgICApO1xuICAgIH1cblxuICAgIGNvbnN0IHsgZGF0YTogdXNlckRhdGEgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgndXNlcnMnKVxuICAgICAgLnNlbGVjdCgncm9sZScpXG4gICAgICAuZXEoJ2lkJywgdXNlci5pZClcbiAgICAgIC5zaW5nbGUoKTtcblxuICAgIGlmICghdXNlckRhdGEgfHwgdXNlckRhdGEucm9sZSAhPT0gJ2FkbWluJykge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0ZvcmJpZGRlbicgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMyB9XG4gICAgICApO1xuICAgIH1cblxuICAgIGNvbnN0IHsgaWQsIC4uLnVwZGF0ZXMgfSA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xuXG4gICAgaWYgKCFpZCkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ1RoZW1lIElEIGlzIHJlcXVpcmVkJyB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gR2V0IG9sZCB2YWx1ZXMgZm9yIGF1ZGl0IHRyYWlsXG4gICAgY29uc3QgeyBkYXRhOiBvbGRUaGVtZSB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCd0aGVtZV9jb25maWdzJylcbiAgICAgIC5zZWxlY3QoJyonKVxuICAgICAgLmVxKCdpZCcsIGlkKVxuICAgICAgLnNpbmdsZSgpO1xuXG4gICAgY29uc3QgeyBkYXRhOiB0aGVtZSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgndGhlbWVfY29uZmlncycpXG4gICAgICAudXBkYXRlKHVwZGF0ZXMpXG4gICAgICAuZXEoJ2lkJywgaWQpXG4gICAgICAuc2VsZWN0KClcbiAgICAgIC5zaW5nbGUoKTtcblxuICAgIGlmIChlcnJvcikge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9LFxuICAgICAgICB7IHN0YXR1czogNTAwIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gTG9nIGF1ZGl0IGV2ZW50IGZvciB0aGVtZSBjb25maWd1cmF0aW9uIGNoYW5nZVxuICAgIGF3YWl0IGxvZ0NvbmZpZ0NoYW5nZShcbiAgICAgIHVzZXIuaWQsXG4gICAgICAndGhlbWVfY29uZmlnJyxcbiAgICAgIGlkLFxuICAgICAgb2xkVGhlbWUsXG4gICAgICB0aGVtZSxcbiAgICAgIHtcbiAgICAgICAgdGhlbWVfbmFtZTogdGhlbWUudGhlbWVfbmFtZSxcbiAgICAgICAgaXNfYWN0aXZlOiB0aGVtZS5pc19hY3RpdmUsXG4gICAgICAgIGNoYW5nZWRfZmllbGRzOiBPYmplY3Qua2V5cyh1cGRhdGVzKSxcbiAgICAgIH1cbiAgICApO1xuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBkYXRhOiB0aGVtZSxcbiAgICAgIG1lc3NhZ2U6ICdUaGVtZSB1cGRhdGVkIHN1Y2Nlc3NmdWxseScsXG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignVXBkYXRlIHRoZW1lIGVycm9yOicsIGVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0ZhaWxlZCB0byB1cGRhdGUgdGhlbWUnIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApO1xuICB9XG59XG5cbi8vIERFTEVURSAtIERlbGV0ZSB0aGVtZSBjb25maWd1cmF0aW9uXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gREVMRVRFKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3Qgc3VwYWJhc2UgPSBhd2FpdCBjcmVhdGVDbGllbnQoKTtcblxuICAgIC8vIENoZWNrIGlmIHVzZXIgaXMgYWRtaW5cbiAgICBjb25zdCB7IGRhdGE6IHsgdXNlciB9IH0gPSBhd2FpdCBzdXBhYmFzZS5hdXRoLmdldFVzZXIoKTtcbiAgICBpZiAoIXVzZXIpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdVbmF1dGhvcml6ZWQnIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDEgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCB7IGRhdGE6IHVzZXJEYXRhIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ3VzZXJzJylcbiAgICAgIC5zZWxlY3QoJ3JvbGUnKVxuICAgICAgLmVxKCdpZCcsIHVzZXIuaWQpXG4gICAgICAuc2luZ2xlKCk7XG5cbiAgICBpZiAoIXVzZXJEYXRhIHx8IHVzZXJEYXRhLnJvbGUgIT09ICdhZG1pbicpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdGb3JiaWRkZW4nIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDMgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCB7IHNlYXJjaFBhcmFtcyB9ID0gbmV3IFVSTChyZXF1ZXN0LnVybCk7XG4gICAgY29uc3QgaWQgPSBzZWFyY2hQYXJhbXMuZ2V0KCdpZCcpO1xuXG4gICAgaWYgKCFpZCkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ1RoZW1lIElEIGlzIHJlcXVpcmVkJyB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgaWYgaXQncyB0aGUgYWN0aXZlIHRoZW1lIGFuZCBnZXQgdGhlbWUgZGV0YWlscyBmb3IgYXVkaXRcbiAgICBjb25zdCB7IGRhdGE6IHRoZW1lIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ3RoZW1lX2NvbmZpZ3MnKVxuICAgICAgLnNlbGVjdCgnKicpXG4gICAgICAuZXEoJ2lkJywgaWQpXG4gICAgICAuc2luZ2xlKCk7XG5cbiAgICBpZiAodGhlbWU/LmlzX2FjdGl2ZSkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0Nhbm5vdCBkZWxldGUgYWN0aXZlIHRoZW1lJyB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCd0aGVtZV9jb25maWdzJylcbiAgICAgIC5kZWxldGUoKVxuICAgICAgLmVxKCdpZCcsIGlkKTtcblxuICAgIGlmIChlcnJvcikge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9LFxuICAgICAgICB7IHN0YXR1czogNTAwIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gTG9nIGF1ZGl0IGV2ZW50IGZvciB0aGVtZSBkZWxldGlvblxuICAgIGF3YWl0IGxvZ0F1ZGl0RXZlbnQoe1xuICAgICAgdXNlcl9pZDogdXNlci5pZCxcbiAgICAgIGV2ZW50X3R5cGU6ICdERUxFVEUnLFxuICAgICAgZXZlbnRfY2F0ZWdvcnk6ICdDT05GSUcnLFxuICAgICAgcmVzb3VyY2VfdHlwZTogJ3RoZW1lX2NvbmZpZycsXG4gICAgICByZXNvdXJjZV9pZDogaWQsXG4gICAgICByZXNvdXJjZV9uYW1lOiB0aGVtZT8udGhlbWVfbmFtZSxcbiAgICAgIGFjdGlvbjogJ0RlbGV0ZWQgdGhlbWUgY29uZmlndXJhdGlvbicsXG4gICAgICBvbGRfdmFsdWVzOiB0aGVtZSxcbiAgICAgIHJpc2tfbGV2ZWw6ICdoaWdoJyxcbiAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgIHdhc19hY3RpdmU6IHRoZW1lPy5pc19hY3RpdmUsXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBtZXNzYWdlOiAnVGhlbWUgZGVsZXRlZCBzdWNjZXNzZnVsbHknLFxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0RlbGV0ZSB0aGVtZSBlcnJvcjonLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdGYWlsZWQgdG8gZGVsZXRlIHRoZW1lJyB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImNyZWF0ZUNsaWVudCIsImxvZ0NvbmZpZ0NoYW5nZSIsImxvZ0F1ZGl0RXZlbnQiLCJHRVQiLCJyZXF1ZXN0Iiwic3VwYWJhc2UiLCJkYXRhIiwidXNlciIsImF1dGgiLCJnZXRVc2VyIiwianNvbiIsInN1Y2Nlc3MiLCJlcnJvciIsInN0YXR1cyIsInVzZXJEYXRhIiwiZnJvbSIsInNlbGVjdCIsImVxIiwiaWQiLCJzaW5nbGUiLCJyb2xlIiwidGhlbWVzIiwib3JkZXIiLCJhc2NlbmRpbmciLCJtZXNzYWdlIiwiY29uc29sZSIsIlBPU1QiLCJib2R5IiwidGhlbWUiLCJpbnNlcnQiLCJjcmVhdGVkX2J5IiwidXNlcl9pZCIsImV2ZW50X3R5cGUiLCJldmVudF9jYXRlZ29yeSIsInJlc291cmNlX3R5cGUiLCJyZXNvdXJjZV9pZCIsInJlc291cmNlX25hbWUiLCJ0aGVtZV9uYW1lIiwiYWN0aW9uIiwibmV3X3ZhbHVlcyIsInJpc2tfbGV2ZWwiLCJtZXRhZGF0YSIsImlzX2FjdGl2ZSIsIlBVVCIsImF1dGhFcnJvciIsImxvZyIsInVwZGF0ZXMiLCJvbGRUaGVtZSIsInVwZGF0ZSIsImNoYW5nZWRfZmllbGRzIiwiT2JqZWN0Iiwia2V5cyIsIkRFTEVURSIsInNlYXJjaFBhcmFtcyIsIlVSTCIsInVybCIsImdldCIsImRlbGV0ZSIsIm9sZF92YWx1ZXMiLCJ3YXNfYWN0aXZlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/admin/theme/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/audit/auditService.ts":
/*!***************************************!*\
  !*** ./src/lib/audit/auditService.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   auditService: () => (/* binding */ auditService),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   generateComplianceReport: () => (/* binding */ generateComplianceReport),\n/* harmony export */   generateSessionId: () => (/* binding */ generateSessionId),\n/* harmony export */   getActiveAlerts: () => (/* binding */ getActiveAlerts),\n/* harmony export */   getAuditEvents: () => (/* binding */ getAuditEvents),\n/* harmony export */   getClientInfo: () => (/* binding */ getClientInfo),\n/* harmony export */   getGradeChanges: () => (/* binding */ getGradeChanges),\n/* harmony export */   getHighRiskEvents: () => (/* binding */ getHighRiskEvents),\n/* harmony export */   getParentalConsent: () => (/* binding */ getParentalConsent),\n/* harmony export */   getStudentRecordAccess: () => (/* binding */ getStudentRecordAccess),\n/* harmony export */   hasValidConsent: () => (/* binding */ hasValidConsent),\n/* harmony export */   logAuditEvent: () => (/* binding */ logAuditEvent),\n/* harmony export */   logAuthEvent: () => (/* binding */ logAuthEvent),\n/* harmony export */   logConfigChange: () => (/* binding */ logConfigChange),\n/* harmony export */   logConsentAction: () => (/* binding */ logConsentAction),\n/* harmony export */   logDataExport: () => (/* binding */ logDataExport),\n/* harmony export */   logGradeChange: () => (/* binding */ logGradeChange),\n/* harmony export */   logStudentRecordAccess: () => (/* binding */ logStudentRecordAccess),\n/* harmony export */   verifyAuditChain: () => (/* binding */ verifyAuditChain)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n// ============================================================================\n// AUDIT TRAIL SERVICE\n// Centralized service for logging and retrieving audit events\n// ============================================================================\n\n// Initialize Supabase client\n// Note: This should use your actual Supabase URL and anon key\nconst supabaseUrl = \"https://dgdondsvtqbqnsecbayx.supabase.co\" || 0;\nconst supabaseAnonKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRnZG9uZHN2dHFicW5zZWNiYXl4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIyNjQ3ODIsImV4cCI6MjA3Nzg0MDc4Mn0.vJCiJGwPGhy_q7avgMnsjihi4i1a7GFUwoGv3Go-9c0\" || 0;\nlet supabase = null;\nfunction getSupabaseClient() {\n    if (!supabase) {\n        supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseAnonKey);\n    }\n    return supabase;\n}\n// ============================================================================\n// CORE AUDIT LOGGING\n// ============================================================================\n/**\n * Log an audit event using the database function\n * This is the main function to call from application code\n */ async function logAuditEvent(params) {\n    try {\n        const client = getSupabaseClient();\n        // Call the database function\n        const { data, error } = await client.rpc(\"log_audit_event\", {\n            p_user_id: params.user_id || null,\n            p_event_type: params.event_type,\n            p_event_category: params.event_category,\n            p_resource_type: params.resource_type,\n            p_resource_id: params.resource_id || null,\n            p_resource_name: params.resource_name || null,\n            p_action: params.action,\n            p_description: params.description || null,\n            p_old_values: params.old_values || null,\n            p_new_values: params.new_values || null,\n            p_session_id: params.session_id || null,\n            p_ip_address: params.ip_address || null,\n            p_user_agent: params.user_agent || null,\n            p_status: params.status || \"success\",\n            p_risk_level: params.risk_level || \"low\",\n            p_metadata: params.metadata || null\n        });\n        if (error) {\n            console.error(\"Error logging audit event:\", error);\n            return null;\n        }\n        return data;\n    } catch (error) {\n        console.error(\"Exception logging audit event:\", error);\n        return null;\n    }\n}\n/**\n * Helper function to get current user's IP address and user agent\n */ function getClientInfo(req) {\n    if (false) {}\n    if (req) {\n        // Server-side with request object\n        const forwarded = req.headers.get(\"x-forwarded-for\");\n        const ip = forwarded ? forwarded.split(\",\")[0] : req.headers.get(\"x-real-ip\") || undefined;\n        return {\n            ip,\n            userAgent: req.headers.get(\"user-agent\") || undefined\n        };\n    }\n    return {};\n}\n/**\n * Generate a session ID for tracking user sessions\n */ function generateSessionId() {\n    return `session_${Date.now()}_${Math.random().toString(36).substring(7)}`;\n}\n// ============================================================================\n// CONVENIENCE LOGGING FUNCTIONS\n// ============================================================================\n/**\n * Log user authentication event\n */ async function logAuthEvent(userId, action, metadata) {\n    const clientInfo = getClientInfo();\n    return logAuditEvent({\n        user_id: userId,\n        event_type: action === \"login\" ? \"LOGIN\" : action === \"logout\" ? \"LOGOUT\" : \"ACCESS\",\n        event_category: \"AUTH\",\n        resource_type: \"auth_session\",\n        action: action.replace(\"_\", \" \"),\n        status: action === \"failed_login\" ? \"failure\" : \"success\",\n        risk_level: action === \"failed_login\" ? \"medium\" : \"low\",\n        ...clientInfo,\n        metadata\n    });\n}\n/**\n * Log student record access (FERPA compliance)\n */ async function logStudentRecordAccess(userId, studentId, resourceType, resourceId, action, metadata) {\n    const clientInfo = getClientInfo();\n    return logAuditEvent({\n        user_id: userId,\n        event_type: \"ACCESS\",\n        event_category: \"STUDENT_RECORD\",\n        resource_type: resourceType,\n        resource_id: resourceId,\n        action,\n        student_id: studentId,\n        is_student_record: true,\n        compliance_flags: [\n            \"FERPA\"\n        ],\n        risk_level: \"medium\",\n        ...clientInfo,\n        metadata\n    });\n}\n/**\n * Log grade change (high-risk event)\n */ async function logGradeChange(userId, studentId, gradeId, oldGrade, newGrade, metadata) {\n    const clientInfo = getClientInfo();\n    return logAuditEvent({\n        user_id: userId,\n        event_type: \"UPDATE\",\n        event_category: \"GRADE\",\n        resource_type: \"grades\",\n        resource_id: gradeId,\n        action: \"Updated student grade\",\n        old_values: oldGrade,\n        new_values: newGrade,\n        student_id: studentId,\n        is_student_record: true,\n        compliance_flags: [\n            \"FERPA\"\n        ],\n        risk_level: \"high\",\n        ...clientInfo,\n        metadata\n    });\n}\n/**\n * Log parental consent action (COPPA compliance)\n */ async function logConsentAction(userId, studentId, consentId, action, consentType, metadata) {\n    const clientInfo = getClientInfo();\n    return logAuditEvent({\n        user_id: userId,\n        event_type: \"CONSENT\",\n        event_category: \"COMPLIANCE\",\n        resource_type: \"parental_consent\",\n        resource_id: consentId,\n        action,\n        student_id: studentId,\n        parental_consent_id: consentId,\n        compliance_flags: [\n            \"COPPA\",\n            \"FERPA\"\n        ],\n        risk_level: \"medium\",\n        ...clientInfo,\n        metadata: {\n            consent_type: consentType,\n            ...metadata\n        }\n    });\n}\n/**\n * Log data export (high-risk event)\n */ async function logDataExport(userId, resourceType, exportFormat, recordCount, metadata) {\n    const clientInfo = getClientInfo();\n    return logAuditEvent({\n        user_id: userId,\n        event_type: \"EXPORT\",\n        event_category: \"DATA\",\n        resource_type: resourceType,\n        action: `Exported ${recordCount} ${resourceType} records as ${exportFormat}`,\n        risk_level: recordCount > 100 ? \"high\" : \"medium\",\n        ...clientInfo,\n        metadata: {\n            export_format: exportFormat,\n            record_count: recordCount,\n            ...metadata\n        }\n    });\n}\n/**\n * Log configuration change (admin action)\n */ async function logConfigChange(userId, resourceType, resourceId, oldValues, newValues, metadata) {\n    const clientInfo = getClientInfo();\n    return logAuditEvent({\n        user_id: userId,\n        event_type: \"UPDATE\",\n        event_category: \"CONFIG\",\n        resource_type: resourceType,\n        resource_id: resourceId,\n        action: `Updated ${resourceType} configuration`,\n        old_values: oldValues,\n        new_values: newValues,\n        risk_level: \"high\",\n        ...clientInfo,\n        metadata\n    });\n}\n// ============================================================================\n// AUDIT RETRIEVAL\n// ============================================================================\n/**\n * Get audit events with filters\n */ async function getAuditEvents(filters = {}) {\n    try {\n        const client = getSupabaseClient();\n        let query = client.from(\"audit_events\").select(\"*\", {\n            count: \"exact\"\n        });\n        // Apply filters\n        if (filters.date_from) {\n            query = query.gte(\"event_timestamp\", filters.date_from);\n        }\n        if (filters.date_to) {\n            query = query.lte(\"event_timestamp\", filters.date_to);\n        }\n        if (filters.user_ids && filters.user_ids.length > 0) {\n            query = query.in(\"user_id\", filters.user_ids);\n        }\n        if (filters.student_ids && filters.student_ids.length > 0) {\n            query = query.in(\"student_id\", filters.student_ids);\n        }\n        if (filters.event_types && filters.event_types.length > 0) {\n            query = query.in(\"event_type\", filters.event_types);\n        }\n        if (filters.event_categories && filters.event_categories.length > 0) {\n            query = query.in(\"event_category\", filters.event_categories);\n        }\n        if (filters.resource_types && filters.resource_types.length > 0) {\n            query = query.in(\"resource_type\", filters.resource_types);\n        }\n        if (filters.risk_levels && filters.risk_levels.length > 0) {\n            query = query.in(\"risk_level\", filters.risk_levels);\n        }\n        if (filters.status && filters.status.length > 0) {\n            query = query.in(\"status\", filters.status);\n        }\n        if (filters.is_student_record !== undefined) {\n            query = query.eq(\"is_student_record\", filters.is_student_record);\n        }\n        if (filters.is_minor_data !== undefined) {\n            query = query.eq(\"is_minor_data\", filters.is_minor_data);\n        }\n        if (filters.search) {\n            query = query.textSearch(\"search_vector\", filters.search);\n        }\n        // Order by timestamp descending\n        query = query.order(\"event_timestamp\", {\n            ascending: false\n        });\n        // Pagination\n        if (filters.limit) {\n            query = query.limit(filters.limit);\n        }\n        if (filters.offset) {\n            query = query.range(filters.offset, filters.offset + (filters.limit || 50) - 1);\n        }\n        const { data, error, count } = await query;\n        return {\n            data: data || [],\n            error,\n            count: count || 0\n        };\n    } catch (error) {\n        console.error(\"Error getting audit events:\", error);\n        return {\n            data: [],\n            error,\n            count: 0\n        };\n    }\n}\n/**\n * Get student record access logs (FERPA view)\n */ async function getStudentRecordAccess(studentId, dateFrom, dateTo) {\n    try {\n        const client = getSupabaseClient();\n        let query = client.from(\"audit_student_record_access\").select(\"*\");\n        if (studentId) {\n            query = query.eq(\"student_id\", studentId);\n        }\n        if (dateFrom) {\n            query = query.gte(\"event_timestamp\", dateFrom);\n        }\n        if (dateTo) {\n            query = query.lte(\"event_timestamp\", dateTo);\n        }\n        query = query.order(\"event_timestamp\", {\n            ascending: false\n        }).limit(100);\n        const { data, error } = await query;\n        return {\n            data: data || [],\n            error\n        };\n    } catch (error) {\n        console.error(\"Error getting student record access:\", error);\n        return {\n            data: [],\n            error\n        };\n    }\n}\n/**\n * Get grade changes audit\n */ async function getGradeChanges(studentId, dateFrom, dateTo) {\n    try {\n        const client = getSupabaseClient();\n        let query = client.from(\"audit_grade_changes\").select(\"*\");\n        if (studentId) {\n            query = query.eq(\"student_id\", studentId);\n        }\n        if (dateFrom) {\n            query = query.gte(\"event_timestamp\", dateFrom);\n        }\n        if (dateTo) {\n            query = query.lte(\"event_timestamp\", dateTo);\n        }\n        query = query.order(\"event_timestamp\", {\n            ascending: false\n        }).limit(100);\n        const { data, error } = await query;\n        return {\n            data: data || [],\n            error\n        };\n    } catch (error) {\n        console.error(\"Error getting grade changes:\", error);\n        return {\n            data: [],\n            error\n        };\n    }\n}\n/**\n * Get high-risk events\n */ async function getHighRiskEvents(limit = 50) {\n    try {\n        const client = getSupabaseClient();\n        const { data, error } = await client.from(\"audit_high_risk_events\").select(\"*\").order(\"event_timestamp\", {\n            ascending: false\n        }).limit(limit);\n        return {\n            data: data || [],\n            error\n        };\n    } catch (error) {\n        console.error(\"Error getting high-risk events:\", error);\n        return {\n            data: [],\n            error\n        };\n    }\n}\n/**\n * Get active alerts\n */ async function getActiveAlerts() {\n    try {\n        const client = getSupabaseClient();\n        const { data, error } = await client.from(\"audit_alerts\").select(\"*\").in(\"status\", [\n            \"open\",\n            \"investigating\"\n        ]).order(\"detected_at\", {\n            ascending: false\n        });\n        return {\n            data: data || [],\n            error\n        };\n    } catch (error) {\n        console.error(\"Error getting active alerts:\", error);\n        return {\n            data: [],\n            error\n        };\n    }\n}\n// ============================================================================\n// PARENTAL CONSENT MANAGEMENT\n// ============================================================================\n/**\n * Get parental consent for a student\n */ async function getParentalConsent(studentId) {\n    try {\n        const client = getSupabaseClient();\n        const { data, error } = await client.from(\"parental_consent_audit\").select(\"*\").eq(\"student_id\", studentId).order(\"requested_at\", {\n            ascending: false\n        });\n        return {\n            data: data || [],\n            error\n        };\n    } catch (error) {\n        console.error(\"Error getting parental consent:\", error);\n        return {\n            data: [],\n            error\n        };\n    }\n}\n/**\n * Check if student has valid consent for a specific type\n */ async function hasValidConsent(studentId, consentType) {\n    try {\n        const client = getSupabaseClient();\n        const { data, error } = await client.from(\"parental_consent_audit\").select(\"id, consent_status, expires_at\").eq(\"student_id\", studentId).eq(\"consent_type\", consentType).eq(\"consent_status\", \"granted\").single();\n        if (error || !data) {\n            return false;\n        }\n        // Check if expired\n        const consentData = data;\n        if (consentData.expires_at) {\n            const expiryDate = new Date(consentData.expires_at);\n            if (expiryDate < new Date()) {\n                return false;\n            }\n        }\n        return true;\n    } catch (error) {\n        console.error(\"Error checking consent:\", error);\n        return false;\n    }\n}\n// ============================================================================\n// UTILITY FUNCTIONS\n// ============================================================================\n/**\n * Verify audit chain integrity\n */ async function verifyAuditChain(dateFrom, dateTo) {\n    try {\n        const client = getSupabaseClient();\n        const { data, error } = await client.rpc(\"verify_audit_chain\", {\n            p_date_from: dateFrom || new Date(Date.now() - 24 * 60 * 60 * 1000).toISOString(),\n            p_date_to: dateTo || new Date().toISOString()\n        });\n        if (error) {\n            console.error(\"Error verifying audit chain:\", error);\n            return {\n                isValid: false,\n                totalEvents: 0,\n                invalidEvents: 0\n            };\n        }\n        const result = data;\n        return {\n            isValid: result[0].is_valid,\n            totalEvents: result[0].total_events,\n            invalidEvents: result[0].invalid_events\n        };\n    } catch (error) {\n        console.error(\"Exception verifying audit chain:\", error);\n        return {\n            isValid: false,\n            totalEvents: 0,\n            invalidEvents: 0\n        };\n    }\n}\n/**\n * Generate compliance report\n */ async function generateComplianceReport(framework, dateFrom, dateTo) {\n    try {\n        const client = getSupabaseClient();\n        const { data, error } = await client.rpc(\"generate_compliance_report\", {\n            p_framework: framework,\n            p_date_from: dateFrom || new Date(Date.now() - 30 * 24 * 60 * 60 * 1000).toISOString(),\n            p_date_to: dateTo || new Date().toISOString()\n        });\n        if (error) {\n            console.error(\"Error generating compliance report:\", error);\n            return null;\n        }\n        return data;\n    } catch (error) {\n        console.error(\"Exception generating compliance report:\", error);\n        return null;\n    }\n}\nconst auditService = {\n    logAuditEvent,\n    logAuthEvent,\n    logStudentRecordAccess,\n    logGradeChange,\n    logConsentAction,\n    logDataExport,\n    logConfigChange,\n    getAuditEvents,\n    getStudentRecordAccess,\n    getGradeChanges,\n    getHighRiskEvents,\n    getActiveAlerts,\n    getParentalConsent,\n    hasValidConsent,\n    verifyAuditChain,\n    generateComplianceReport,\n    getClientInfo,\n    generateSessionId\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (auditService);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0UsWUFBWTtZQUNuQ0gsZUFBZUMsTUFBTSxDQUFDLEVBQUUsQ0FBQ0csY0FBYztRQUN6QztJQUNGLEVBQUUsT0FBT2pJLE9BQU87UUFDZGtDLFFBQVFsQyxLQUFLLENBQUMsb0NBQW9DQTtRQUNsRCxPQUFPO1lBQUUySCxTQUFTO1lBQU9DLGFBQWE7WUFBR0MsZUFBZTtRQUFFO0lBQzVEO0FBQ0Y7QUFFQTs7Q0FFQyxHQUNNLGVBQWVLLHlCQUNwQkMsU0FBaUIsRUFDakJ2QixRQUFpQixFQUNqQkMsTUFBZTtJQUVmLElBQUk7UUFDRixNQUFNL0csU0FBU0g7UUFFZixNQUFNLEVBQUVJLElBQUksRUFBRUMsS0FBSyxFQUFFLEdBQUcsTUFBTUYsT0FBT0csR0FBRyxDQUFDLDhCQUE4QjtZQUNyRW1JLGFBQWFEO1lBQ2JYLGFBQWFaLFlBQVksSUFBSTlELEtBQUtBLEtBQUtDLEdBQUcsS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLE1BQU0wRSxXQUFXO1lBQ3BGQyxXQUFXYixVQUFVLElBQUkvRCxPQUFPMkUsV0FBVztRQUM3QztRQUVBLElBQUl6SCxPQUFPO1lBQ1RrQyxRQUFRbEMsS0FBSyxDQUFDLHVDQUF1Q0E7WUFDckQsT0FBTztRQUNUO1FBRUEsT0FBT0Q7SUFDVCxFQUFFLE9BQU9DLE9BQU87UUFDZGtDLFFBQVFsQyxLQUFLLENBQUMsMkNBQTJDQTtRQUN6RCxPQUFPO0lBQ1Q7QUFDRjtBQUVPLE1BQU1xSSxlQUFlO0lBQzFCekk7SUFDQXdEO0lBQ0FJO0lBQ0FPO0lBQ0FJO0lBQ0FLO0lBQ0FLO0lBQ0FHO0lBQ0EyQjtJQUNBRztJQUNBQztJQUNBQztJQUNBQztJQUNBQztJQUNBSztJQUNBVztJQUNBL0Y7SUFDQVU7QUFDRixFQUFFO0FBRUYsaUVBQWV3RixZQUFZQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGFyZW50aW5nLXNjaG9vbC1wbGF0Zm9ybS8uL3NyYy9saWIvYXVkaXQvYXVkaXRTZXJ2aWNlLnRzP2Q4MTIiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gQVVESVQgVFJBSUwgU0VSVklDRVxuLy8gQ2VudHJhbGl6ZWQgc2VydmljZSBmb3IgbG9nZ2luZyBhbmQgcmV0cmlldmluZyBhdWRpdCBldmVudHNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJztcbmltcG9ydCB0eXBlIHtcbiAgQXVkaXRFdmVudCxcbiAgQ3JlYXRlQXVkaXRFdmVudFBhcmFtcyxcbiAgQXVkaXRGaWx0ZXJzLFxuICBQYXJlbnRhbENvbnNlbnQsXG4gIFN0dWRlbnRSZWNvcmRBY2Nlc3MsXG4gIEdyYWRlQ2hhbmdlLFxuICBBdWRpdEFsZXJ0LFxufSBmcm9tICcuL3R5cGVzJztcblxuLy8gSW5pdGlhbGl6ZSBTdXBhYmFzZSBjbGllbnRcbi8vIE5vdGU6IFRoaXMgc2hvdWxkIHVzZSB5b3VyIGFjdHVhbCBTdXBhYmFzZSBVUkwgYW5kIGFub24ga2V5XG5jb25zdCBzdXBhYmFzZVVybCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCB8fCAnJztcbmNvbnN0IHN1cGFiYXNlQW5vbktleSA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIHx8ICcnO1xuXG5sZXQgc3VwYWJhc2U6IFJldHVyblR5cGU8dHlwZW9mIGNyZWF0ZUNsaWVudD4gfCBudWxsID0gbnVsbDtcblxuZnVuY3Rpb24gZ2V0U3VwYWJhc2VDbGllbnQoKSB7XG4gIGlmICghc3VwYWJhc2UpIHtcbiAgICBzdXBhYmFzZSA9IGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VBbm9uS2V5KTtcbiAgfVxuICByZXR1cm4gc3VwYWJhc2U7XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIENPUkUgQVVESVQgTE9HR0lOR1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vKipcbiAqIExvZyBhbiBhdWRpdCBldmVudCB1c2luZyB0aGUgZGF0YWJhc2UgZnVuY3Rpb25cbiAqIFRoaXMgaXMgdGhlIG1haW4gZnVuY3Rpb24gdG8gY2FsbCBmcm9tIGFwcGxpY2F0aW9uIGNvZGVcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvZ0F1ZGl0RXZlbnQocGFyYW1zOiBDcmVhdGVBdWRpdEV2ZW50UGFyYW1zKTogUHJvbWlzZTxzdHJpbmcgfCBudWxsPiB7XG4gIHRyeSB7XG4gICAgY29uc3QgY2xpZW50ID0gZ2V0U3VwYWJhc2VDbGllbnQoKTtcblxuICAgIC8vIENhbGwgdGhlIGRhdGFiYXNlIGZ1bmN0aW9uXG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgY2xpZW50LnJwYygnbG9nX2F1ZGl0X2V2ZW50Jywge1xuICAgICAgcF91c2VyX2lkOiBwYXJhbXMudXNlcl9pZCB8fCBudWxsLFxuICAgICAgcF9ldmVudF90eXBlOiBwYXJhbXMuZXZlbnRfdHlwZSxcbiAgICAgIHBfZXZlbnRfY2F0ZWdvcnk6IHBhcmFtcy5ldmVudF9jYXRlZ29yeSxcbiAgICAgIHBfcmVzb3VyY2VfdHlwZTogcGFyYW1zLnJlc291cmNlX3R5cGUsXG4gICAgICBwX3Jlc291cmNlX2lkOiBwYXJhbXMucmVzb3VyY2VfaWQgfHwgbnVsbCxcbiAgICAgIHBfcmVzb3VyY2VfbmFtZTogcGFyYW1zLnJlc291cmNlX25hbWUgfHwgbnVsbCxcbiAgICAgIHBfYWN0aW9uOiBwYXJhbXMuYWN0aW9uLFxuICAgICAgcF9kZXNjcmlwdGlvbjogcGFyYW1zLmRlc2NyaXB0aW9uIHx8IG51bGwsXG4gICAgICBwX29sZF92YWx1ZXM6IHBhcmFtcy5vbGRfdmFsdWVzIHx8IG51bGwsXG4gICAgICBwX25ld192YWx1ZXM6IHBhcmFtcy5uZXdfdmFsdWVzIHx8IG51bGwsXG4gICAgICBwX3Nlc3Npb25faWQ6IHBhcmFtcy5zZXNzaW9uX2lkIHx8IG51bGwsXG4gICAgICBwX2lwX2FkZHJlc3M6IHBhcmFtcy5pcF9hZGRyZXNzIHx8IG51bGwsXG4gICAgICBwX3VzZXJfYWdlbnQ6IHBhcmFtcy51c2VyX2FnZW50IHx8IG51bGwsXG4gICAgICBwX3N0YXR1czogcGFyYW1zLnN0YXR1cyB8fCAnc3VjY2VzcycsXG4gICAgICBwX3Jpc2tfbGV2ZWw6IHBhcmFtcy5yaXNrX2xldmVsIHx8ICdsb3cnLFxuICAgICAgcF9tZXRhZGF0YTogcGFyYW1zLm1ldGFkYXRhIHx8IG51bGwsXG4gICAgfSBhcyBhbnkpO1xuXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBsb2dnaW5nIGF1ZGl0IGV2ZW50OicsIGVycm9yKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiBkYXRhIGFzIHN0cmluZztcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFeGNlcHRpb24gbG9nZ2luZyBhdWRpdCBldmVudDonLCBlcnJvcik7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuLyoqXG4gKiBIZWxwZXIgZnVuY3Rpb24gdG8gZ2V0IGN1cnJlbnQgdXNlcidzIElQIGFkZHJlc3MgYW5kIHVzZXIgYWdlbnRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldENsaWVudEluZm8ocmVxPzogUmVxdWVzdCk6IHsgaXA/OiBzdHJpbmc7IHVzZXJBZ2VudD86IHN0cmluZyB9IHtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgLy8gQ2xpZW50LXNpZGVcbiAgICByZXR1cm4ge1xuICAgICAgdXNlckFnZW50OiBuYXZpZ2F0b3IudXNlckFnZW50LFxuICAgIH07XG4gIH1cblxuICBpZiAocmVxKSB7XG4gICAgLy8gU2VydmVyLXNpZGUgd2l0aCByZXF1ZXN0IG9iamVjdFxuICAgIGNvbnN0IGZvcndhcmRlZCA9IHJlcS5oZWFkZXJzLmdldCgneC1mb3J3YXJkZWQtZm9yJyk7XG4gICAgY29uc3QgaXAgPSBmb3J3YXJkZWQgPyBmb3J3YXJkZWQuc3BsaXQoJywnKVswXSA6IHJlcS5oZWFkZXJzLmdldCgneC1yZWFsLWlwJykgfHwgdW5kZWZpbmVkO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGlwLFxuICAgICAgdXNlckFnZW50OiByZXEuaGVhZGVycy5nZXQoJ3VzZXItYWdlbnQnKSB8fCB1bmRlZmluZWQsXG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiB7fTtcbn1cblxuLyoqXG4gKiBHZW5lcmF0ZSBhIHNlc3Npb24gSUQgZm9yIHRyYWNraW5nIHVzZXIgc2Vzc2lvbnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlU2Vzc2lvbklkKCk6IHN0cmluZyB7XG4gIHJldHVybiBgc2Vzc2lvbl8ke0RhdGUubm93KCl9XyR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDcpfWA7XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIENPTlZFTklFTkNFIExPR0dJTkcgRlVOQ1RJT05TXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8qKlxuICogTG9nIHVzZXIgYXV0aGVudGljYXRpb24gZXZlbnRcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvZ0F1dGhFdmVudChcbiAgdXNlcklkOiBzdHJpbmcgfCB1bmRlZmluZWQsXG4gIGFjdGlvbjogJ2xvZ2luJyB8ICdsb2dvdXQnIHwgJ2ZhaWxlZF9sb2dpbicgfCAncGFzc3dvcmRfcmVzZXQnLFxuICBtZXRhZGF0YT86IFJlY29yZDxzdHJpbmcsIGFueT5cbikge1xuICBjb25zdCBjbGllbnRJbmZvID0gZ2V0Q2xpZW50SW5mbygpO1xuXG4gIHJldHVybiBsb2dBdWRpdEV2ZW50KHtcbiAgICB1c2VyX2lkOiB1c2VySWQsXG4gICAgZXZlbnRfdHlwZTogYWN0aW9uID09PSAnbG9naW4nID8gJ0xPR0lOJyA6IGFjdGlvbiA9PT0gJ2xvZ291dCcgPyAnTE9HT1VUJyA6ICdBQ0NFU1MnLFxuICAgIGV2ZW50X2NhdGVnb3J5OiAnQVVUSCcsXG4gICAgcmVzb3VyY2VfdHlwZTogJ2F1dGhfc2Vzc2lvbicsXG4gICAgYWN0aW9uOiBhY3Rpb24ucmVwbGFjZSgnXycsICcgJyksXG4gICAgc3RhdHVzOiBhY3Rpb24gPT09ICdmYWlsZWRfbG9naW4nID8gJ2ZhaWx1cmUnIDogJ3N1Y2Nlc3MnLFxuICAgIHJpc2tfbGV2ZWw6IGFjdGlvbiA9PT0gJ2ZhaWxlZF9sb2dpbicgPyAnbWVkaXVtJyA6ICdsb3cnLFxuICAgIC4uLmNsaWVudEluZm8sXG4gICAgbWV0YWRhdGEsXG4gIH0pO1xufVxuXG4vKipcbiAqIExvZyBzdHVkZW50IHJlY29yZCBhY2Nlc3MgKEZFUlBBIGNvbXBsaWFuY2UpXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2dTdHVkZW50UmVjb3JkQWNjZXNzKFxuICB1c2VySWQ6IHN0cmluZyxcbiAgc3R1ZGVudElkOiBzdHJpbmcsXG4gIHJlc291cmNlVHlwZTogc3RyaW5nLFxuICByZXNvdXJjZUlkOiBzdHJpbmcsXG4gIGFjdGlvbjogc3RyaW5nLFxuICBtZXRhZGF0YT86IFJlY29yZDxzdHJpbmcsIGFueT5cbikge1xuICBjb25zdCBjbGllbnRJbmZvID0gZ2V0Q2xpZW50SW5mbygpO1xuXG4gIHJldHVybiBsb2dBdWRpdEV2ZW50KHtcbiAgICB1c2VyX2lkOiB1c2VySWQsXG4gICAgZXZlbnRfdHlwZTogJ0FDQ0VTUycsXG4gICAgZXZlbnRfY2F0ZWdvcnk6ICdTVFVERU5UX1JFQ09SRCcsXG4gICAgcmVzb3VyY2VfdHlwZTogcmVzb3VyY2VUeXBlLFxuICAgIHJlc291cmNlX2lkOiByZXNvdXJjZUlkLFxuICAgIGFjdGlvbixcbiAgICBzdHVkZW50X2lkOiBzdHVkZW50SWQsXG4gICAgaXNfc3R1ZGVudF9yZWNvcmQ6IHRydWUsXG4gICAgY29tcGxpYW5jZV9mbGFnczogWydGRVJQQSddLFxuICAgIHJpc2tfbGV2ZWw6ICdtZWRpdW0nLFxuICAgIC4uLmNsaWVudEluZm8sXG4gICAgbWV0YWRhdGEsXG4gIH0pO1xufVxuXG4vKipcbiAqIExvZyBncmFkZSBjaGFuZ2UgKGhpZ2gtcmlzayBldmVudClcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvZ0dyYWRlQ2hhbmdlKFxuICB1c2VySWQ6IHN0cmluZyxcbiAgc3R1ZGVudElkOiBzdHJpbmcsXG4gIGdyYWRlSWQ6IHN0cmluZyxcbiAgb2xkR3JhZGU6IGFueSxcbiAgbmV3R3JhZGU6IGFueSxcbiAgbWV0YWRhdGE/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+XG4pIHtcbiAgY29uc3QgY2xpZW50SW5mbyA9IGdldENsaWVudEluZm8oKTtcblxuICByZXR1cm4gbG9nQXVkaXRFdmVudCh7XG4gICAgdXNlcl9pZDogdXNlcklkLFxuICAgIGV2ZW50X3R5cGU6ICdVUERBVEUnLFxuICAgIGV2ZW50X2NhdGVnb3J5OiAnR1JBREUnLFxuICAgIHJlc291cmNlX3R5cGU6ICdncmFkZXMnLFxuICAgIHJlc291cmNlX2lkOiBncmFkZUlkLFxuICAgIGFjdGlvbjogJ1VwZGF0ZWQgc3R1ZGVudCBncmFkZScsXG4gICAgb2xkX3ZhbHVlczogb2xkR3JhZGUsXG4gICAgbmV3X3ZhbHVlczogbmV3R3JhZGUsXG4gICAgc3R1ZGVudF9pZDogc3R1ZGVudElkLFxuICAgIGlzX3N0dWRlbnRfcmVjb3JkOiB0cnVlLFxuICAgIGNvbXBsaWFuY2VfZmxhZ3M6IFsnRkVSUEEnXSxcbiAgICByaXNrX2xldmVsOiAnaGlnaCcsXG4gICAgLi4uY2xpZW50SW5mbyxcbiAgICBtZXRhZGF0YSxcbiAgfSk7XG59XG5cbi8qKlxuICogTG9nIHBhcmVudGFsIGNvbnNlbnQgYWN0aW9uIChDT1BQQSBjb21wbGlhbmNlKVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9nQ29uc2VudEFjdGlvbihcbiAgdXNlcklkOiBzdHJpbmcsXG4gIHN0dWRlbnRJZDogc3RyaW5nLFxuICBjb25zZW50SWQ6IHN0cmluZyxcbiAgYWN0aW9uOiBzdHJpbmcsXG4gIGNvbnNlbnRUeXBlOiBzdHJpbmcsXG4gIG1ldGFkYXRhPzogUmVjb3JkPHN0cmluZywgYW55PlxuKSB7XG4gIGNvbnN0IGNsaWVudEluZm8gPSBnZXRDbGllbnRJbmZvKCk7XG5cbiAgcmV0dXJuIGxvZ0F1ZGl0RXZlbnQoe1xuICAgIHVzZXJfaWQ6IHVzZXJJZCxcbiAgICBldmVudF90eXBlOiAnQ09OU0VOVCcsXG4gICAgZXZlbnRfY2F0ZWdvcnk6ICdDT01QTElBTkNFJyxcbiAgICByZXNvdXJjZV90eXBlOiAncGFyZW50YWxfY29uc2VudCcsXG4gICAgcmVzb3VyY2VfaWQ6IGNvbnNlbnRJZCxcbiAgICBhY3Rpb24sXG4gICAgc3R1ZGVudF9pZDogc3R1ZGVudElkLFxuICAgIHBhcmVudGFsX2NvbnNlbnRfaWQ6IGNvbnNlbnRJZCxcbiAgICBjb21wbGlhbmNlX2ZsYWdzOiBbJ0NPUFBBJywgJ0ZFUlBBJ10sXG4gICAgcmlza19sZXZlbDogJ21lZGl1bScsXG4gICAgLi4uY2xpZW50SW5mbyxcbiAgICBtZXRhZGF0YTogeyBjb25zZW50X3R5cGU6IGNvbnNlbnRUeXBlLCAuLi5tZXRhZGF0YSB9LFxuICB9KTtcbn1cblxuLyoqXG4gKiBMb2cgZGF0YSBleHBvcnQgKGhpZ2gtcmlzayBldmVudClcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvZ0RhdGFFeHBvcnQoXG4gIHVzZXJJZDogc3RyaW5nLFxuICByZXNvdXJjZVR5cGU6IHN0cmluZyxcbiAgZXhwb3J0Rm9ybWF0OiBzdHJpbmcsXG4gIHJlY29yZENvdW50OiBudW1iZXIsXG4gIG1ldGFkYXRhPzogUmVjb3JkPHN0cmluZywgYW55PlxuKSB7XG4gIGNvbnN0IGNsaWVudEluZm8gPSBnZXRDbGllbnRJbmZvKCk7XG5cbiAgcmV0dXJuIGxvZ0F1ZGl0RXZlbnQoe1xuICAgIHVzZXJfaWQ6IHVzZXJJZCxcbiAgICBldmVudF90eXBlOiAnRVhQT1JUJyxcbiAgICBldmVudF9jYXRlZ29yeTogJ0RBVEEnLFxuICAgIHJlc291cmNlX3R5cGU6IHJlc291cmNlVHlwZSxcbiAgICBhY3Rpb246IGBFeHBvcnRlZCAke3JlY29yZENvdW50fSAke3Jlc291cmNlVHlwZX0gcmVjb3JkcyBhcyAke2V4cG9ydEZvcm1hdH1gLFxuICAgIHJpc2tfbGV2ZWw6IHJlY29yZENvdW50ID4gMTAwID8gJ2hpZ2gnIDogJ21lZGl1bScsXG4gICAgLi4uY2xpZW50SW5mbyxcbiAgICBtZXRhZGF0YToge1xuICAgICAgZXhwb3J0X2Zvcm1hdDogZXhwb3J0Rm9ybWF0LFxuICAgICAgcmVjb3JkX2NvdW50OiByZWNvcmRDb3VudCxcbiAgICAgIC4uLm1ldGFkYXRhLFxuICAgIH0sXG4gIH0pO1xufVxuXG4vKipcbiAqIExvZyBjb25maWd1cmF0aW9uIGNoYW5nZSAoYWRtaW4gYWN0aW9uKVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9nQ29uZmlnQ2hhbmdlKFxuICB1c2VySWQ6IHN0cmluZyxcbiAgcmVzb3VyY2VUeXBlOiBzdHJpbmcsXG4gIHJlc291cmNlSWQ6IHN0cmluZyxcbiAgb2xkVmFsdWVzOiBhbnksXG4gIG5ld1ZhbHVlczogYW55LFxuICBtZXRhZGF0YT86IFJlY29yZDxzdHJpbmcsIGFueT5cbikge1xuICBjb25zdCBjbGllbnRJbmZvID0gZ2V0Q2xpZW50SW5mbygpO1xuXG4gIHJldHVybiBsb2dBdWRpdEV2ZW50KHtcbiAgICB1c2VyX2lkOiB1c2VySWQsXG4gICAgZXZlbnRfdHlwZTogJ1VQREFURScsXG4gICAgZXZlbnRfY2F0ZWdvcnk6ICdDT05GSUcnLFxuICAgIHJlc291cmNlX3R5cGU6IHJlc291cmNlVHlwZSxcbiAgICByZXNvdXJjZV9pZDogcmVzb3VyY2VJZCxcbiAgICBhY3Rpb246IGBVcGRhdGVkICR7cmVzb3VyY2VUeXBlfSBjb25maWd1cmF0aW9uYCxcbiAgICBvbGRfdmFsdWVzOiBvbGRWYWx1ZXMsXG4gICAgbmV3X3ZhbHVlczogbmV3VmFsdWVzLFxuICAgIHJpc2tfbGV2ZWw6ICdoaWdoJyxcbiAgICAuLi5jbGllbnRJbmZvLFxuICAgIG1ldGFkYXRhLFxuICB9KTtcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gQVVESVQgUkVUUklFVkFMXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8qKlxuICogR2V0IGF1ZGl0IGV2ZW50cyB3aXRoIGZpbHRlcnNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEF1ZGl0RXZlbnRzKFxuICBmaWx0ZXJzOiBBdWRpdEZpbHRlcnMgPSB7fVxuKTogUHJvbWlzZTx7IGRhdGE6IEF1ZGl0RXZlbnRbXTsgZXJyb3I6IGFueTsgY291bnQ6IG51bWJlciB9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgY2xpZW50ID0gZ2V0U3VwYWJhc2VDbGllbnQoKTtcblxuICAgIGxldCBxdWVyeSA9IGNsaWVudC5mcm9tKCdhdWRpdF9ldmVudHMnKS5zZWxlY3QoJyonLCB7IGNvdW50OiAnZXhhY3QnIH0pO1xuXG4gICAgLy8gQXBwbHkgZmlsdGVyc1xuICAgIGlmIChmaWx0ZXJzLmRhdGVfZnJvbSkge1xuICAgICAgcXVlcnkgPSBxdWVyeS5ndGUoJ2V2ZW50X3RpbWVzdGFtcCcsIGZpbHRlcnMuZGF0ZV9mcm9tKTtcbiAgICB9XG4gICAgaWYgKGZpbHRlcnMuZGF0ZV90bykge1xuICAgICAgcXVlcnkgPSBxdWVyeS5sdGUoJ2V2ZW50X3RpbWVzdGFtcCcsIGZpbHRlcnMuZGF0ZV90byk7XG4gICAgfVxuICAgIGlmIChmaWx0ZXJzLnVzZXJfaWRzICYmIGZpbHRlcnMudXNlcl9pZHMubGVuZ3RoID4gMCkge1xuICAgICAgcXVlcnkgPSBxdWVyeS5pbigndXNlcl9pZCcsIGZpbHRlcnMudXNlcl9pZHMpO1xuICAgIH1cbiAgICBpZiAoZmlsdGVycy5zdHVkZW50X2lkcyAmJiBmaWx0ZXJzLnN0dWRlbnRfaWRzLmxlbmd0aCA+IDApIHtcbiAgICAgIHF1ZXJ5ID0gcXVlcnkuaW4oJ3N0dWRlbnRfaWQnLCBmaWx0ZXJzLnN0dWRlbnRfaWRzKTtcbiAgICB9XG4gICAgaWYgKGZpbHRlcnMuZXZlbnRfdHlwZXMgJiYgZmlsdGVycy5ldmVudF90eXBlcy5sZW5ndGggPiAwKSB7XG4gICAgICBxdWVyeSA9IHF1ZXJ5LmluKCdldmVudF90eXBlJywgZmlsdGVycy5ldmVudF90eXBlcyk7XG4gICAgfVxuICAgIGlmIChmaWx0ZXJzLmV2ZW50X2NhdGVnb3JpZXMgJiYgZmlsdGVycy5ldmVudF9jYXRlZ29yaWVzLmxlbmd0aCA+IDApIHtcbiAgICAgIHF1ZXJ5ID0gcXVlcnkuaW4oJ2V2ZW50X2NhdGVnb3J5JywgZmlsdGVycy5ldmVudF9jYXRlZ29yaWVzKTtcbiAgICB9XG4gICAgaWYgKGZpbHRlcnMucmVzb3VyY2VfdHlwZXMgJiYgZmlsdGVycy5yZXNvdXJjZV90eXBlcy5sZW5ndGggPiAwKSB7XG4gICAgICBxdWVyeSA9IHF1ZXJ5LmluKCdyZXNvdXJjZV90eXBlJywgZmlsdGVycy5yZXNvdXJjZV90eXBlcyk7XG4gICAgfVxuICAgIGlmIChmaWx0ZXJzLnJpc2tfbGV2ZWxzICYmIGZpbHRlcnMucmlza19sZXZlbHMubGVuZ3RoID4gMCkge1xuICAgICAgcXVlcnkgPSBxdWVyeS5pbigncmlza19sZXZlbCcsIGZpbHRlcnMucmlza19sZXZlbHMpO1xuICAgIH1cbiAgICBpZiAoZmlsdGVycy5zdGF0dXMgJiYgZmlsdGVycy5zdGF0dXMubGVuZ3RoID4gMCkge1xuICAgICAgcXVlcnkgPSBxdWVyeS5pbignc3RhdHVzJywgZmlsdGVycy5zdGF0dXMpO1xuICAgIH1cbiAgICBpZiAoZmlsdGVycy5pc19zdHVkZW50X3JlY29yZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBxdWVyeSA9IHF1ZXJ5LmVxKCdpc19zdHVkZW50X3JlY29yZCcsIGZpbHRlcnMuaXNfc3R1ZGVudF9yZWNvcmQpO1xuICAgIH1cbiAgICBpZiAoZmlsdGVycy5pc19taW5vcl9kYXRhICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHF1ZXJ5ID0gcXVlcnkuZXEoJ2lzX21pbm9yX2RhdGEnLCBmaWx0ZXJzLmlzX21pbm9yX2RhdGEpO1xuICAgIH1cbiAgICBpZiAoZmlsdGVycy5zZWFyY2gpIHtcbiAgICAgIHF1ZXJ5ID0gcXVlcnkudGV4dFNlYXJjaCgnc2VhcmNoX3ZlY3RvcicsIGZpbHRlcnMuc2VhcmNoKTtcbiAgICB9XG5cbiAgICAvLyBPcmRlciBieSB0aW1lc3RhbXAgZGVzY2VuZGluZ1xuICAgIHF1ZXJ5ID0gcXVlcnkub3JkZXIoJ2V2ZW50X3RpbWVzdGFtcCcsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KTtcblxuICAgIC8vIFBhZ2luYXRpb25cbiAgICBpZiAoZmlsdGVycy5saW1pdCkge1xuICAgICAgcXVlcnkgPSBxdWVyeS5saW1pdChmaWx0ZXJzLmxpbWl0KTtcbiAgICB9XG4gICAgaWYgKGZpbHRlcnMub2Zmc2V0KSB7XG4gICAgICBxdWVyeSA9IHF1ZXJ5LnJhbmdlKGZpbHRlcnMub2Zmc2V0LCBmaWx0ZXJzLm9mZnNldCArIChmaWx0ZXJzLmxpbWl0IHx8IDUwKSAtIDEpO1xuICAgIH1cblxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IsIGNvdW50IH0gPSBhd2FpdCBxdWVyeTtcblxuICAgIHJldHVybiB7XG4gICAgICBkYXRhOiAoZGF0YSBhcyBBdWRpdEV2ZW50W10pIHx8IFtdLFxuICAgICAgZXJyb3IsXG4gICAgICBjb3VudDogY291bnQgfHwgMCxcbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgYXVkaXQgZXZlbnRzOicsIGVycm9yKTtcbiAgICByZXR1cm4geyBkYXRhOiBbXSwgZXJyb3IsIGNvdW50OiAwIH07XG4gIH1cbn1cblxuLyoqXG4gKiBHZXQgc3R1ZGVudCByZWNvcmQgYWNjZXNzIGxvZ3MgKEZFUlBBIHZpZXcpXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRTdHVkZW50UmVjb3JkQWNjZXNzKFxuICBzdHVkZW50SWQ/OiBzdHJpbmcsXG4gIGRhdGVGcm9tPzogc3RyaW5nLFxuICBkYXRlVG8/OiBzdHJpbmdcbik6IFByb21pc2U8eyBkYXRhOiBTdHVkZW50UmVjb3JkQWNjZXNzW107IGVycm9yOiBhbnkgfT4ge1xuICB0cnkge1xuICAgIGNvbnN0IGNsaWVudCA9IGdldFN1cGFiYXNlQ2xpZW50KCk7XG5cbiAgICBsZXQgcXVlcnkgPSBjbGllbnQuZnJvbSgnYXVkaXRfc3R1ZGVudF9yZWNvcmRfYWNjZXNzJykuc2VsZWN0KCcqJyk7XG5cbiAgICBpZiAoc3R1ZGVudElkKSB7XG4gICAgICBxdWVyeSA9IHF1ZXJ5LmVxKCdzdHVkZW50X2lkJywgc3R1ZGVudElkKTtcbiAgICB9XG4gICAgaWYgKGRhdGVGcm9tKSB7XG4gICAgICBxdWVyeSA9IHF1ZXJ5Lmd0ZSgnZXZlbnRfdGltZXN0YW1wJywgZGF0ZUZyb20pO1xuICAgIH1cbiAgICBpZiAoZGF0ZVRvKSB7XG4gICAgICBxdWVyeSA9IHF1ZXJ5Lmx0ZSgnZXZlbnRfdGltZXN0YW1wJywgZGF0ZVRvKTtcbiAgICB9XG5cbiAgICBxdWVyeSA9IHF1ZXJ5Lm9yZGVyKCdldmVudF90aW1lc3RhbXAnLCB7IGFzY2VuZGluZzogZmFsc2UgfSkubGltaXQoMTAwKTtcblxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHF1ZXJ5O1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGRhdGE6IChkYXRhIGFzIFN0dWRlbnRSZWNvcmRBY2Nlc3NbXSkgfHwgW10sXG4gICAgICBlcnJvcixcbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgc3R1ZGVudCByZWNvcmQgYWNjZXNzOicsIGVycm9yKTtcbiAgICByZXR1cm4geyBkYXRhOiBbXSwgZXJyb3IgfTtcbiAgfVxufVxuXG4vKipcbiAqIEdldCBncmFkZSBjaGFuZ2VzIGF1ZGl0XG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRHcmFkZUNoYW5nZXMoXG4gIHN0dWRlbnRJZD86IHN0cmluZyxcbiAgZGF0ZUZyb20/OiBzdHJpbmcsXG4gIGRhdGVUbz86IHN0cmluZ1xuKTogUHJvbWlzZTx7IGRhdGE6IEdyYWRlQ2hhbmdlW107IGVycm9yOiBhbnkgfT4ge1xuICB0cnkge1xuICAgIGNvbnN0IGNsaWVudCA9IGdldFN1cGFiYXNlQ2xpZW50KCk7XG5cbiAgICBsZXQgcXVlcnkgPSBjbGllbnQuZnJvbSgnYXVkaXRfZ3JhZGVfY2hhbmdlcycpLnNlbGVjdCgnKicpO1xuXG4gICAgaWYgKHN0dWRlbnRJZCkge1xuICAgICAgcXVlcnkgPSBxdWVyeS5lcSgnc3R1ZGVudF9pZCcsIHN0dWRlbnRJZCk7XG4gICAgfVxuICAgIGlmIChkYXRlRnJvbSkge1xuICAgICAgcXVlcnkgPSBxdWVyeS5ndGUoJ2V2ZW50X3RpbWVzdGFtcCcsIGRhdGVGcm9tKTtcbiAgICB9XG4gICAgaWYgKGRhdGVUbykge1xuICAgICAgcXVlcnkgPSBxdWVyeS5sdGUoJ2V2ZW50X3RpbWVzdGFtcCcsIGRhdGVUbyk7XG4gICAgfVxuXG4gICAgcXVlcnkgPSBxdWVyeS5vcmRlcignZXZlbnRfdGltZXN0YW1wJywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pLmxpbWl0KDEwMCk7XG5cbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBxdWVyeTtcblxuICAgIHJldHVybiB7XG4gICAgICBkYXRhOiAoZGF0YSBhcyBHcmFkZUNoYW5nZVtdKSB8fCBbXSxcbiAgICAgIGVycm9yLFxuICAgIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyBncmFkZSBjaGFuZ2VzOicsIGVycm9yKTtcbiAgICByZXR1cm4geyBkYXRhOiBbXSwgZXJyb3IgfTtcbiAgfVxufVxuXG4vKipcbiAqIEdldCBoaWdoLXJpc2sgZXZlbnRzXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRIaWdoUmlza0V2ZW50cyhcbiAgbGltaXQ6IG51bWJlciA9IDUwXG4pOiBQcm9taXNlPHsgZGF0YTogQXVkaXRFdmVudFtdOyBlcnJvcjogYW55IH0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBjbGllbnQgPSBnZXRTdXBhYmFzZUNsaWVudCgpO1xuXG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgY2xpZW50XG4gICAgICAuZnJvbSgnYXVkaXRfaGlnaF9yaXNrX2V2ZW50cycpXG4gICAgICAuc2VsZWN0KCcqJylcbiAgICAgIC5vcmRlcignZXZlbnRfdGltZXN0YW1wJywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pXG4gICAgICAubGltaXQobGltaXQpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGRhdGE6IChkYXRhIGFzIEF1ZGl0RXZlbnRbXSkgfHwgW10sXG4gICAgICBlcnJvcixcbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgaGlnaC1yaXNrIGV2ZW50czonLCBlcnJvcik7XG4gICAgcmV0dXJuIHsgZGF0YTogW10sIGVycm9yIH07XG4gIH1cbn1cblxuLyoqXG4gKiBHZXQgYWN0aXZlIGFsZXJ0c1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QWN0aXZlQWxlcnRzKCk6IFByb21pc2U8eyBkYXRhOiBBdWRpdEFsZXJ0W107IGVycm9yOiBhbnkgfT4ge1xuICB0cnkge1xuICAgIGNvbnN0IGNsaWVudCA9IGdldFN1cGFiYXNlQ2xpZW50KCk7XG5cbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBjbGllbnRcbiAgICAgIC5mcm9tKCdhdWRpdF9hbGVydHMnKVxuICAgICAgLnNlbGVjdCgnKicpXG4gICAgICAuaW4oJ3N0YXR1cycsIFsnb3BlbicsICdpbnZlc3RpZ2F0aW5nJ10pXG4gICAgICAub3JkZXIoJ2RldGVjdGVkX2F0JywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGRhdGE6IChkYXRhIGFzIEF1ZGl0QWxlcnRbXSkgfHwgW10sXG4gICAgICBlcnJvcixcbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgYWN0aXZlIGFsZXJ0czonLCBlcnJvcik7XG4gICAgcmV0dXJuIHsgZGF0YTogW10sIGVycm9yIH07XG4gIH1cbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gUEFSRU5UQUwgQ09OU0VOVCBNQU5BR0VNRU5UXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8qKlxuICogR2V0IHBhcmVudGFsIGNvbnNlbnQgZm9yIGEgc3R1ZGVudFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UGFyZW50YWxDb25zZW50KFxuICBzdHVkZW50SWQ6IHN0cmluZ1xuKTogUHJvbWlzZTx7IGRhdGE6IFBhcmVudGFsQ29uc2VudFtdOyBlcnJvcjogYW55IH0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBjbGllbnQgPSBnZXRTdXBhYmFzZUNsaWVudCgpO1xuXG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgY2xpZW50XG4gICAgICAuZnJvbSgncGFyZW50YWxfY29uc2VudF9hdWRpdCcpXG4gICAgICAuc2VsZWN0KCcqJylcbiAgICAgIC5lcSgnc3R1ZGVudF9pZCcsIHN0dWRlbnRJZClcbiAgICAgIC5vcmRlcigncmVxdWVzdGVkX2F0JywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGRhdGE6IChkYXRhIGFzIFBhcmVudGFsQ29uc2VudFtdKSB8fCBbXSxcbiAgICAgIGVycm9yLFxuICAgIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyBwYXJlbnRhbCBjb25zZW50OicsIGVycm9yKTtcbiAgICByZXR1cm4geyBkYXRhOiBbXSwgZXJyb3IgfTtcbiAgfVxufVxuXG4vKipcbiAqIENoZWNrIGlmIHN0dWRlbnQgaGFzIHZhbGlkIGNvbnNlbnQgZm9yIGEgc3BlY2lmaWMgdHlwZVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaGFzVmFsaWRDb25zZW50KFxuICBzdHVkZW50SWQ6IHN0cmluZyxcbiAgY29uc2VudFR5cGU6IHN0cmluZ1xuKTogUHJvbWlzZTxib29sZWFuPiB7XG4gIHRyeSB7XG4gICAgY29uc3QgY2xpZW50ID0gZ2V0U3VwYWJhc2VDbGllbnQoKTtcblxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IGNsaWVudFxuICAgICAgLmZyb20oJ3BhcmVudGFsX2NvbnNlbnRfYXVkaXQnKVxuICAgICAgLnNlbGVjdCgnaWQsIGNvbnNlbnRfc3RhdHVzLCBleHBpcmVzX2F0JylcbiAgICAgIC5lcSgnc3R1ZGVudF9pZCcsIHN0dWRlbnRJZClcbiAgICAgIC5lcSgnY29uc2VudF90eXBlJywgY29uc2VudFR5cGUpXG4gICAgICAuZXEoJ2NvbnNlbnRfc3RhdHVzJywgJ2dyYW50ZWQnKVxuICAgICAgLnNpbmdsZSgpO1xuXG4gICAgaWYgKGVycm9yIHx8ICFkYXRhKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgaWYgZXhwaXJlZFxuICAgIGNvbnN0IGNvbnNlbnREYXRhID0gZGF0YSBhcyBhbnk7XG4gICAgaWYgKGNvbnNlbnREYXRhLmV4cGlyZXNfYXQpIHtcbiAgICAgIGNvbnN0IGV4cGlyeURhdGUgPSBuZXcgRGF0ZShjb25zZW50RGF0YS5leHBpcmVzX2F0KTtcbiAgICAgIGlmIChleHBpcnlEYXRlIDwgbmV3IERhdGUoKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgY2hlY2tpbmcgY29uc2VudDonLCBlcnJvcik7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFVUSUxJVFkgRlVOQ1RJT05TXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8qKlxuICogVmVyaWZ5IGF1ZGl0IGNoYWluIGludGVncml0eVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdmVyaWZ5QXVkaXRDaGFpbihcbiAgZGF0ZUZyb20/OiBzdHJpbmcsXG4gIGRhdGVUbz86IHN0cmluZ1xuKTogUHJvbWlzZTx7IGlzVmFsaWQ6IGJvb2xlYW47IHRvdGFsRXZlbnRzOiBudW1iZXI7IGludmFsaWRFdmVudHM6IG51bWJlciB9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgY2xpZW50ID0gZ2V0U3VwYWJhc2VDbGllbnQoKTtcblxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IGNsaWVudC5ycGMoJ3ZlcmlmeV9hdWRpdF9jaGFpbicsIHtcbiAgICAgIHBfZGF0ZV9mcm9tOiBkYXRlRnJvbSB8fCBuZXcgRGF0ZShEYXRlLm5vdygpIC0gMjQgKiA2MCAqIDYwICogMTAwMCkudG9JU09TdHJpbmcoKSxcbiAgICAgIHBfZGF0ZV90bzogZGF0ZVRvIHx8IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICB9IGFzIGFueSk7XG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHZlcmlmeWluZyBhdWRpdCBjaGFpbjonLCBlcnJvcik7XG4gICAgICByZXR1cm4geyBpc1ZhbGlkOiBmYWxzZSwgdG90YWxFdmVudHM6IDAsIGludmFsaWRFdmVudHM6IDAgfTtcbiAgICB9XG5cbiAgICBjb25zdCByZXN1bHQgPSBkYXRhIGFzIGFueTtcbiAgICByZXR1cm4ge1xuICAgICAgaXNWYWxpZDogcmVzdWx0WzBdLmlzX3ZhbGlkLFxuICAgICAgdG90YWxFdmVudHM6IHJlc3VsdFswXS50b3RhbF9ldmVudHMsXG4gICAgICBpbnZhbGlkRXZlbnRzOiByZXN1bHRbMF0uaW52YWxpZF9ldmVudHMsXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFeGNlcHRpb24gdmVyaWZ5aW5nIGF1ZGl0IGNoYWluOicsIGVycm9yKTtcbiAgICByZXR1cm4geyBpc1ZhbGlkOiBmYWxzZSwgdG90YWxFdmVudHM6IDAsIGludmFsaWRFdmVudHM6IDAgfTtcbiAgfVxufVxuXG4vKipcbiAqIEdlbmVyYXRlIGNvbXBsaWFuY2UgcmVwb3J0XG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZW5lcmF0ZUNvbXBsaWFuY2VSZXBvcnQoXG4gIGZyYW1ld29yazogc3RyaW5nLFxuICBkYXRlRnJvbT86IHN0cmluZyxcbiAgZGF0ZVRvPzogc3RyaW5nXG4pOiBQcm9taXNlPHN0cmluZyB8IG51bGw+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBjbGllbnQgPSBnZXRTdXBhYmFzZUNsaWVudCgpO1xuXG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgY2xpZW50LnJwYygnZ2VuZXJhdGVfY29tcGxpYW5jZV9yZXBvcnQnLCB7XG4gICAgICBwX2ZyYW1ld29yazogZnJhbWV3b3JrLFxuICAgICAgcF9kYXRlX2Zyb206IGRhdGVGcm9tIHx8IG5ldyBEYXRlKERhdGUubm93KCkgLSAzMCAqIDI0ICogNjAgKiA2MCAqIDEwMDApLnRvSVNPU3RyaW5nKCksXG4gICAgICBwX2RhdGVfdG86IGRhdGVUbyB8fCBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgfSBhcyBhbnkpO1xuXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZW5lcmF0aW5nIGNvbXBsaWFuY2UgcmVwb3J0OicsIGVycm9yKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiBkYXRhIGFzIHN0cmluZztcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFeGNlcHRpb24gZ2VuZXJhdGluZyBjb21wbGlhbmNlIHJlcG9ydDonLCBlcnJvcik7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IGF1ZGl0U2VydmljZSA9IHtcbiAgbG9nQXVkaXRFdmVudCxcbiAgbG9nQXV0aEV2ZW50LFxuICBsb2dTdHVkZW50UmVjb3JkQWNjZXNzLFxuICBsb2dHcmFkZUNoYW5nZSxcbiAgbG9nQ29uc2VudEFjdGlvbixcbiAgbG9nRGF0YUV4cG9ydCxcbiAgbG9nQ29uZmlnQ2hhbmdlLFxuICBnZXRBdWRpdEV2ZW50cyxcbiAgZ2V0U3R1ZGVudFJlY29yZEFjY2VzcyxcbiAgZ2V0R3JhZGVDaGFuZ2VzLFxuICBnZXRIaWdoUmlza0V2ZW50cyxcbiAgZ2V0QWN0aXZlQWxlcnRzLFxuICBnZXRQYXJlbnRhbENvbnNlbnQsXG4gIGhhc1ZhbGlkQ29uc2VudCxcbiAgdmVyaWZ5QXVkaXRDaGFpbixcbiAgZ2VuZXJhdGVDb21wbGlhbmNlUmVwb3J0LFxuICBnZXRDbGllbnRJbmZvLFxuICBnZW5lcmF0ZVNlc3Npb25JZCxcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGF1ZGl0U2VydmljZTtcbiJdLCJuYW1lcyI6WyJjcmVhdGVDbGllbnQiLCJzdXBhYmFzZVVybCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJzdXBhYmFzZUFub25LZXkiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSIsInN1cGFiYXNlIiwiZ2V0U3VwYWJhc2VDbGllbnQiLCJsb2dBdWRpdEV2ZW50IiwicGFyYW1zIiwiY2xpZW50IiwiZGF0YSIsImVycm9yIiwicnBjIiwicF91c2VyX2lkIiwidXNlcl9pZCIsInBfZXZlbnRfdHlwZSIsImV2ZW50X3R5cGUiLCJwX2V2ZW50X2NhdGVnb3J5IiwiZXZlbnRfY2F0ZWdvcnkiLCJwX3Jlc291cmNlX3R5cGUiLCJyZXNvdXJjZV90eXBlIiwicF9yZXNvdXJjZV9pZCIsInJlc291cmNlX2lkIiwicF9yZXNvdXJjZV9uYW1lIiwicmVzb3VyY2VfbmFtZSIsInBfYWN0aW9uIiwiYWN0aW9uIiwicF9kZXNjcmlwdGlvbiIsImRlc2NyaXB0aW9uIiwicF9vbGRfdmFsdWVzIiwib2xkX3ZhbHVlcyIsInBfbmV3X3ZhbHVlcyIsIm5ld192YWx1ZXMiLCJwX3Nlc3Npb25faWQiLCJzZXNzaW9uX2lkIiwicF9pcF9hZGRyZXNzIiwiaXBfYWRkcmVzcyIsInBfdXNlcl9hZ2VudCIsInVzZXJfYWdlbnQiLCJwX3N0YXR1cyIsInN0YXR1cyIsInBfcmlza19sZXZlbCIsInJpc2tfbGV2ZWwiLCJwX21ldGFkYXRhIiwibWV0YWRhdGEiLCJjb25zb2xlIiwiZ2V0Q2xpZW50SW5mbyIsInJlcSIsInVzZXJBZ2VudCIsIm5hdmlnYXRvciIsImZvcndhcmRlZCIsImhlYWRlcnMiLCJnZXQiLCJpcCIsInNwbGl0IiwidW5kZWZpbmVkIiwiZ2VuZXJhdGVTZXNzaW9uSWQiLCJEYXRlIiwibm93IiwiTWF0aCIsInJhbmRvbSIsInRvU3RyaW5nIiwic3Vic3RyaW5nIiwibG9nQXV0aEV2ZW50IiwidXNlcklkIiwiY2xpZW50SW5mbyIsInJlcGxhY2UiLCJsb2dTdHVkZW50UmVjb3JkQWNjZXNzIiwic3R1ZGVudElkIiwicmVzb3VyY2VUeXBlIiwicmVzb3VyY2VJZCIsInN0dWRlbnRfaWQiLCJpc19zdHVkZW50X3JlY29yZCIsImNvbXBsaWFuY2VfZmxhZ3MiLCJsb2dHcmFkZUNoYW5nZSIsImdyYWRlSWQiLCJvbGRHcmFkZSIsIm5ld0dyYWRlIiwibG9nQ29uc2VudEFjdGlvbiIsImNvbnNlbnRJZCIsImNvbnNlbnRUeXBlIiwicGFyZW50YWxfY29uc2VudF9pZCIsImNvbnNlbnRfdHlwZSIsImxvZ0RhdGFFeHBvcnQiLCJleHBvcnRGb3JtYXQiLCJyZWNvcmRDb3VudCIsImV4cG9ydF9mb3JtYXQiLCJyZWNvcmRfY291bnQiLCJsb2dDb25maWdDaGFuZ2UiLCJvbGRWYWx1ZXMiLCJuZXdWYWx1ZXMiLCJnZXRBdWRpdEV2ZW50cyIsImZpbHRlcnMiLCJxdWVyeSIsImZyb20iLCJzZWxlY3QiLCJjb3VudCIsImRhdGVfZnJvbSIsImd0ZSIsImRhdGVfdG8iLCJsdGUiLCJ1c2VyX2lkcyIsImxlbmd0aCIsImluIiwic3R1ZGVudF9pZHMiLCJldmVudF90eXBlcyIsImV2ZW50X2NhdGVnb3JpZXMiLCJyZXNvdXJjZV90eXBlcyIsInJpc2tfbGV2ZWxzIiwiZXEiLCJpc19taW5vcl9kYXRhIiwic2VhcmNoIiwidGV4dFNlYXJjaCIsIm9yZGVyIiwiYXNjZW5kaW5nIiwibGltaXQiLCJvZmZzZXQiLCJyYW5nZSIsImdldFN0dWRlbnRSZWNvcmRBY2Nlc3MiLCJkYXRlRnJvbSIsImRhdGVUbyIsImdldEdyYWRlQ2hhbmdlcyIsImdldEhpZ2hSaXNrRXZlbnRzIiwiZ2V0QWN0aXZlQWxlcnRzIiwiZ2V0UGFyZW50YWxDb25zZW50IiwiaGFzVmFsaWRDb25zZW50Iiwic2luZ2xlIiwiY29uc2VudERhdGEiLCJleHBpcmVzX2F0IiwiZXhwaXJ5RGF0ZSIsInZlcmlmeUF1ZGl0Q2hhaW4iLCJwX2RhdGVfZnJvbSIsInRvSVNPU3RyaW5nIiwicF9kYXRlX3RvIiwiaXNWYWxpZCIsInRvdGFsRXZlbnRzIiwiaW52YWxpZEV2ZW50cyIsInJlc3VsdCIsImlzX3ZhbGlkIiwidG90YWxfZXZlbnRzIiwiaW52YWxpZF9ldmVudHMiLCJnZW5lcmF0ZUNvbXBsaWFuY2VSZXBvcnQiLCJmcmFtZXdvcmsiLCJwX2ZyYW1ld29yayIsImF1ZGl0U2VydmljZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/audit/auditService.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/supabase/server.ts":
/*!************************************!*\
  !*** ./src/lib/supabase/server.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createClient: () => (/* binding */ createClient)\n/* harmony export */ });\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\");\n/* harmony import */ var _supabase_ssr__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @supabase/ssr */ \"(rsc)/./node_modules/@supabase/ssr/dist/module/index.js\");\n\n\nasync function createClient() {\n    const cookieStore = await (0,next_headers__WEBPACK_IMPORTED_MODULE_0__.cookies)();\n    return (0,_supabase_ssr__WEBPACK_IMPORTED_MODULE_1__.createServerClient)(\"https://dgdondsvtqbqnsecbayx.supabase.co\", \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRnZG9uZHN2dHFicW5zZWNiYXl4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIyNjQ3ODIsImV4cCI6MjA3Nzg0MDc4Mn0.vJCiJGwPGhy_q7avgMnsjihi4i1a7GFUwoGv3Go-9c0\", {\n        cookies: {\n            get (name) {\n                return cookieStore.get(name)?.value;\n            },\n            set (name, value, options) {\n                try {\n                    cookieStore.set({\n                        name,\n                        value,\n                        ...options\n                    });\n                } catch (error) {\n                // The `set` method was called from a Server Component.\n                // This can be ignored if you have middleware refreshing\n                // user sessions.\n                }\n            },\n            remove (name, options) {\n                try {\n                    cookieStore.set({\n                        name,\n                        value: \"\",\n                        ...options\n                    });\n                } catch (error) {\n                // The `delete` method was called from a Server Component.\n                // This can be ignored if you have middleware refreshing\n                // user sessions.\n                }\n            }\n        }\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3N1cGFiYXNlL3NlcnZlci50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBdUM7QUFDZ0M7QUFFaEUsZUFBZUU7SUFDcEIsTUFBTUMsY0FBYyxNQUFNSCxxREFBT0E7SUFFakMsT0FBT0MsaUVBQWtCQSxDQUN2QkcsMENBQW9DLEVBQ3BDQSxrTkFBeUMsRUFDekM7UUFDRUosU0FBUztZQUNQUSxLQUFJQyxJQUFZO2dCQUNkLE9BQU9OLFlBQVlLLEdBQUcsQ0FBQ0MsT0FBT0M7WUFDaEM7WUFDQUMsS0FBSUYsSUFBWSxFQUFFQyxLQUFhLEVBQUVFLE9BQXNCO2dCQUNyRCxJQUFJO29CQUNGVCxZQUFZUSxHQUFHLENBQUM7d0JBQUVGO3dCQUFNQzt3QkFBTyxHQUFHRSxPQUFPO29CQUFDO2dCQUM1QyxFQUFFLE9BQU9DLE9BQU87Z0JBQ2QsdURBQXVEO2dCQUN2RCx3REFBd0Q7Z0JBQ3hELGlCQUFpQjtnQkFDbkI7WUFDRjtZQUNBQyxRQUFPTCxJQUFZLEVBQUVHLE9BQXNCO2dCQUN6QyxJQUFJO29CQUNGVCxZQUFZUSxHQUFHLENBQUM7d0JBQUVGO3dCQUFNQyxPQUFPO3dCQUFJLEdBQUdFLE9BQU87b0JBQUM7Z0JBQ2hELEVBQUUsT0FBT0MsT0FBTztnQkFDZCwwREFBMEQ7Z0JBQzFELHdEQUF3RDtnQkFDeEQsaUJBQWlCO2dCQUNuQjtZQUNGO1FBQ0Y7SUFDRjtBQUVKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGFyZW50aW5nLXNjaG9vbC1wbGF0Zm9ybS8uL3NyYy9saWIvc3VwYWJhc2Uvc2VydmVyLnRzPzJlOGUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY29va2llcyB9IGZyb20gJ25leHQvaGVhZGVycyc7XG5pbXBvcnQgeyBjcmVhdGVTZXJ2ZXJDbGllbnQsIHR5cGUgQ29va2llT3B0aW9ucyB9IGZyb20gJ0BzdXBhYmFzZS9zc3InO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlQ2xpZW50KCkge1xuICBjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKTtcblxuICByZXR1cm4gY3JlYXRlU2VydmVyQ2xpZW50KFxuICAgIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCEsXG4gICAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkhLFxuICAgIHtcbiAgICAgIGNvb2tpZXM6IHtcbiAgICAgICAgZ2V0KG5hbWU6IHN0cmluZykge1xuICAgICAgICAgIHJldHVybiBjb29raWVTdG9yZS5nZXQobmFtZSk/LnZhbHVlO1xuICAgICAgICB9LFxuICAgICAgICBzZXQobmFtZTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nLCBvcHRpb25zOiBDb29raWVPcHRpb25zKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvb2tpZVN0b3JlLnNldCh7IG5hbWUsIHZhbHVlLCAuLi5vcHRpb25zIH0pO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAvLyBUaGUgYHNldGAgbWV0aG9kIHdhcyBjYWxsZWQgZnJvbSBhIFNlcnZlciBDb21wb25lbnQuXG4gICAgICAgICAgICAvLyBUaGlzIGNhbiBiZSBpZ25vcmVkIGlmIHlvdSBoYXZlIG1pZGRsZXdhcmUgcmVmcmVzaGluZ1xuICAgICAgICAgICAgLy8gdXNlciBzZXNzaW9ucy5cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHJlbW92ZShuYW1lOiBzdHJpbmcsIG9wdGlvbnM6IENvb2tpZU9wdGlvbnMpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29va2llU3RvcmUuc2V0KHsgbmFtZSwgdmFsdWU6ICcnLCAuLi5vcHRpb25zIH0pO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAvLyBUaGUgYGRlbGV0ZWAgbWV0aG9kIHdhcyBjYWxsZWQgZnJvbSBhIFNlcnZlciBDb21wb25lbnQuXG4gICAgICAgICAgICAvLyBUaGlzIGNhbiBiZSBpZ25vcmVkIGlmIHlvdSBoYXZlIG1pZGRsZXdhcmUgcmVmcmVzaGluZ1xuICAgICAgICAgICAgLy8gdXNlciBzZXNzaW9ucy5cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH1cbiAgKTtcbn0iXSwibmFtZXMiOlsiY29va2llcyIsImNyZWF0ZVNlcnZlckNsaWVudCIsImNyZWF0ZUNsaWVudCIsImNvb2tpZVN0b3JlIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIiwiZ2V0IiwibmFtZSIsInZhbHVlIiwic2V0Iiwib3B0aW9ucyIsImVycm9yIiwicmVtb3ZlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/supabase/server.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/tslib","vendor-chunks/cookie"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fadmin%2Ftheme%2Froute&page=%2Fapi%2Fadmin%2Ftheme%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Ftheme%2Froute.ts&appDir=C%3A%5CUsers%5COffirOmer%5CDocuments%5CIPSPlatform%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5COffirOmer%5CDocuments%5CIPSPlatform&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();